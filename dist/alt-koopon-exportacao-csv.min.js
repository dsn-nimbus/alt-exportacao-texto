!function(o){"use strict";o.module("alt.koopon.exportacao-csv",[]).directive("altKooponExportacaoCsv",[function(){var n="A",a=function(n,a,r){function t(a){var r=[],t=n.titulos,i=!!n.arquivoContabil,e=a.propriedades,u=a.info,c=[],p=/\d+\.\d{2}/,l="%0A",v="%20";return n.titulos&&r.push(t),angular.forEach(u,function(n){var a=[];angular.forEach(e,function(r){if(o.isDefined(n[r])){var t=n[r];""===t?t='""':i&&(t='"'+t+'"',t=p.test(t)?'"'+p.exec(t).join().replace(".",",")+'"':t),a.push(t)}}),r.push(a)}),angular.forEach(r,function(o,n){c.push(o.join(","))}),c.join(l).replace(/ /g,v)}function i(o,a){var r=document.createElement("a");r.href="data:attachment/"+n.tipoArquivo+","+o,r.target="_blank",r.download=a,document.body.appendChild(r),r.click(),document.body.removeChild(r)}n.tipoArquivo=n.tipoArquivo||"csv",a.on("click",function(){var o=t(n.preparaInfo());i(o,n.nomeArquivo)})},r={nomeArquivo:"@",tipoArquivo:"@",arquivoContabil:"@",preparaInfo:"&"};return{restrict:n,link:a,scope:r}}])}(angular);