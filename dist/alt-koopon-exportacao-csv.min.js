!function(o){"use strict";o.module("alt.koopon.exportacao-csv",[]).directive("altKooponExportacaoCsv",[function(){var n="A",a=function(n,a,t){function i(a){var t=[],i=n.titulos,r=!!n.arquivoContabil,e=a.propriedades,u=a.info,c=[];return n.titulos&&t.push(i),angular.forEach(u,function(n){var a=[];angular.forEach(e,function(t){if(o.isDefined(n[t])){var i=n[t];""===i?i='""':r&&(i='"'+i+'"',i=/\d+\.\d{2}/.test(i)?'"'+/\d+\.\d{2}/.exec(i).join().replace(".",",")+'"':i),a.push(i)}}),t.push(a)}),angular.forEach(t,function(o,n){c.push(o.join(","))}),c.join("%0A")}function r(o,a){var t=document.createElement("a");t.href="data:attachment/"+n.tipoArquivo+","+o,t.target="_blank",t.download=a,document.body.appendChild(t),t.click(),document.body.removeChild(t)}n.tipoArquivo=n.tipoArquivo||"csv",a.on("click",function(){var o=i(n.preparaInfo());r(o,n.nomeArquivo)})},t={nomeArquivo:"@",tipoArquivo:"@",arquivoContabil:"@",preparaInfo:"&"};return{restrict:n,link:a,scope:t}}])}(angular);